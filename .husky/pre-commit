#!/bin/sh

# Run lint-staged for formatting
npx lint-staged

# Check for debug functions in staged PHP files
echo "ğŸ” Checking for debug functions..."
STAGED_PHP_FILES=$(git diff --cached --name-only --diff-filter=ACM | grep '\.php$' || true)

if [ -n "$STAGED_PHP_FILES" ]; then
  if echo "$STAGED_PHP_FILES" | xargs grep -En '\b(dd|dump|ds|ray)\(' 2>/dev/null; then
    echo "âŒ Debug functions found in staged files (dd, dump, ds, ray)"
    echo "Please remove them before committing"
    exit 1
  fi
fi

echo "âœ… No debug functions found"